<!DOCTYPE html><html lang="en-us"><head><link rel="shortcut icon" type="image/png" sizes="16x16" href="https://dsc-spidal.github.io/harp/img/favicon-16x9.png"><link rel="shortcut icon" type="image/png" sizes="32x32" href="https://dsc-spidal.github.io/harp/img/favicon-32x18.png"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Hugo 0.18" /><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="harp"><meta property="og:image" content="/img/logo54x54.png"><meta property="og:url" content="https://dsc-spidal.github.io/harp/"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@heronstreaming"><meta name="twitter:title" content="harp"><meta name="twitter:image" content="/img/0-1-1.png"><meta property="og:site_name" content="Heron Tracker"><meta property="og:url" content="/docs/operators/heron-tracker/"><meta property="og:description" content=""><meta name="twitter:description" content=""><title>harp Documentation - Heron Tracker</title><link rel="stylesheet" href="https://dsc-spidal.github.io/harp/css/style.min.css"><link rel="stylesheet" href="https://dsc-spidal.github.io/harp/css/font-awesome.min.css"><link rel="stylesheet" href="https://dsc-spidal.github.io/harp/css/pygments.css"></head><body><nav class="hn-top-navbar navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="hn-navbar-container container-fluid"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#hn-navbar" aria-controls="hn-navbar" aria-expanded="false"><span class="sr-only"><Toggle>navigation</Toggle></span><i class="hn-toggle-button fa fa-bars"></i></button><a class="hn-navbar-logo navbar-brand" href="https://dsc-spidal.github.io/harp/"><img class="pull-left" src="https://dsc-spidal.github.io/harp/img/0-1-2.png"></a></div><div id="hn-navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav navbar-right"><li><a href="https://dsc-spidal.github.io/harp/docs/getting-started">Docs</a></li><li><a href="https://dsc-spidal.github.io/harp/api">API</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/resources">Resources</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/contributors/community">Community</a></li><li><a href="https://dsc-spidal.github.io/harp/">GitHub</a></li><li><a href="https://groups.google.com/forum/#!forum/harp-users">Mailing List</a></li></ul></div></div></nav><div class="hn-main"><div class="container"><div class="row"><aside class="hn-sidebar hidden-xs col-sm-4 col-md-3 col-lg-2 collapse"><nav class="hn-sidebar-nav"><div id="hn-accordion" class="panel-group" role="tablist" aria-multiselectable="true"><div class="panel panel-default"><section id="getting-started" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-getting-started" aria-labelledby="getting-started"><i class="fa fa-caret-right"></i>Getting Started</a></h4></section><div id="collapse-getting-started" class="panel-collapse collapse" aria-labelledby="getting-started"><div class="panel-body"><ul><li><a href="https://dsc-spidal.github.io/harp/docs/getting-started">Harp Installation</a></li></ul></div></div></div><div class="panel panel-default"><section id="harp-concepts" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-harp-concepts" aria-labelledby="harp-concepts"><i class="fa fa-caret-right"></i>Harp Concepts</a></h4></section><div id="collapse-harp-concepts" class="panel-collapse collapse" aria-labelledby="harp-concepts"><div class="panel-body"><ul><li><a href="https://dsc-spidal.github.io/harp/docs/concepts/features">Features</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/concepts/computation-models">Computation Models</a></li></ul></div></div></div><div class="panel panel-default"><section id="data-interfaces-and-types" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-data-interfaces-and-types" aria-labelledby="data-interfaces-and-types"><i class="fa fa-caret-right"></i>Data Interfaces and Types</a></h4></section><div id="collapse-data-interfaces-and-types" class="panel-collapse collapse" aria-labelledby="data-interfaces-and-types"><div class="panel-body"><ul><li><a href="https://dsc-spidal.github.io/harp/docs/data-interface">Data Interfaces and Types</a></li></ul></div></div></div><div class="panel panel-default"><section id="collective-communication" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-collective-communication" aria-labelledby="collective-communication"><i class="fa fa-caret-right"></i>Collective Communication</a></h4></section><div id="collapse-collective-communication" class="panel-collapse collapse" aria-labelledby="collective-communication"><div class="panel-body"><ul><li><a href="https://dsc-spidal.github.io/harp/docs/communications/broadcast">broadcast</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/communications/reduce">reduce</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/communications/allgather">allgather</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/communications/allreduce">allreduce</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/communications/regroup">regroup</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/communications/pushandpull">push &amp; pull</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/communications/rotate">rotate</a></li></ul></div></div></div><div class="panel panel-default"><section id="schedulers" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-schedulers" aria-labelledby="schedulers"><i class="fa fa-caret-right"></i>Schedulers</a></h4></section><div id="collapse-schedulers" class="panel-collapse collapse" aria-labelledby="schedulers"><div class="panel-body"><ul><li><a href="https://dsc-spidal.github.io/harp/docs/scheduler/static-scheduler">Static Scheduler</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/scheduler/dynamic-scheduler">Dynamic Scheduler</a></li></ul></div></div></div><div class="panel panel-default"><section id="examples" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-examples" aria-labelledby="examples"><i class="fa fa-caret-right"></i>Examples</a></h4></section><div id="collapse-examples" class="panel-collapse collapse" aria-labelledby="examples"><div class="panel-body"><ul><li><a href="https://dsc-spidal.github.io/harp/docs/examples/kmeans">k-means</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/examples/allreducekmeans">allreduce k-means</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/examples/bcastreducekmeans">broadcast &amp; reduce k-means</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/examples/pushpullkmeans">push &amp; pull k-means</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/examples/regroupallgatherkmeans">regroup &amp; allgather k-means</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/examples/latentdirichletallocation">latent dirichlet allocation</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/examples/mlrsgd">Multiclass Logistic Regression</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/examples/lda">LDA</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/examples/svm">SVM</a></li></ul></div></div></div><div class="panel panel-default"><section id="harp-daal" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-harp-daal" aria-labelledby="harp-daal"><i class="fa fa-caret-right"></i>Harp-DAAL</a></h4></section><div id="collapse-harp-daal" class="panel-collapse collapse" aria-labelledby="harp-daal"><div class="panel-body"><ul><li><a href="https://dsc-spidal.github.io/harp/docs/harpdaal/harpdaal">Harp-DAAL</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/harpdaal/Example">Example</a></li></ul></div></div></div><div class="panel panel-default"><section id="harp-resources" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-harp-resources" aria-labelledby="harp-resources"><i class="fa fa-caret-right"></i>Harp Resources</a></h4></section><div id="collapse-harp-resources" class="panel-collapse collapse" aria-labelledby="harp-resources"><div class="panel-body"><ul><li><a href="https://dsc-spidal.github.io/harp/docs/resources">Harp Resources</a></li></ul></div></div></div><div class="panel panel-default"><section id="contributors" class="panel-heading" role="tab"><h4 class="panel-title"><a role="button" data-toggle="collapse" data-parent="#hn-accordion" href="#collapse-contributors" aria-labelledby="contributors"><i class="fa fa-caret-right"></i>Contributors</a></h4></section><div id="collapse-contributors" class="panel-collapse collapse" aria-labelledby="contributors"><div class="panel-body"><ul><li><a href="https://dsc-spidal.github.io/harp/docs/contributors/community">Community</a></li><li><a href="https://dsc-spidal.github.io/harp/docs/contributors/contributors">Contributors</a></li></ul></div></div></div></div></nav></aside><section class="hn-docs-main col-sm-8 col-md-9 col-lg-10 col-sm-offset-4 col-md-offset-3 col-lg-offset-2"><header class="hn-docs-header page-header"><h1>Heron Tracker</h1><div class="hn-docs-description"></div></header><article class="hn-docs-content">

<p><strong>Heron Tracker</strong> is a web service that continuously gathers a wide
variety of information about Heron topologies and exposes
that information through a <a href="../heron-tracker-api">JSON REST API</a>.
More on the role of the Tracker can be found
<a href="../../concepts/architecture#heron-tracker">here</a>.</p>

<h2 id="building-heron-tracker">Building Heron Tracker</h2>

<p>Heron uses <a href="http://bazel.io/">bazel</a> for compiling.
<a href="../../developers/compiling/compiling">Compiling</a> describes how to setup bazel
for heron.</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e"># Build heron-tracker</span>
$ bazel build heron/tools/tracker/src/python:heron-tracker

<span style="color: #75715e"># The location of heron-tracker pex executable is</span>
<span style="color: #75715e"># bazel-bin/heron/tools/tracker/src/python/heron-tracker</span>
<span style="color: #75715e"># To run using default options:</span>
$ ./bazel-bin/heron/tools/tracker/src/python/heron-tracker
</pre></div>

<p><code>heron-tracker</code> is a self executable
<a href="https://pex.readthedocs.io/en/latest/whatispex.html">pex</a> archive.</p>

<h3 id="heron-tracker-config-file">Heron Tracker Config File</h3>

<p>The config file is a <code>yaml</code> file that should contain the following information.</p>

<h4 id="1-state-manager-locations">1. State Manager locations</h4>

<p>This is a list of locations where topology writes its states. An example of
<a href="../deployment/statemanagers/zookeeper">zookeeper state manager</a> and
<a href="../deployment/statemanagers/localfs">local file state manager</a> look like this:</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">## Contains the sources where the states are stored.</span>
<span style="color: #75715e"># Each source has these attributes:</span>
<span style="color: #75715e"># 1. type - type of state manager (zookeeper or file, etc.)</span>
<span style="color: #75715e"># 2. name - name to be used for this source</span>
<span style="color: #75715e"># 3. hostport - only used to connect to zk, must be of the form &#39;host:port&#39;</span>
<span style="color: #75715e"># 4. rootpath - where all the states are stored</span>
<span style="color: #75715e"># 5. tunnelhost - if ssh tunneling needs to be established to connect to it</span>
<span style="color: #ae81ff">statemgrs</span><span style="color: #f8f8f2">:</span>
  <span style="color: #f8f8f2">-</span>
    <span style="color: #ae81ff">type</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&quot;file&quot;</span>
    <span style="color: #ae81ff">name</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&quot;local&quot;</span>
    <span style="color: #ae81ff">rootpath</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&quot;~/.herondata/repository/state/local&quot;</span>
    <span style="color: #ae81ff">tunnelhost</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&quot;localhost&quot;</span>
<span style="color: #75715e">#</span>
<span style="color: #75715e"># To use &#39;localzk&#39;, launch a zookeeper server locally</span>
<span style="color: #75715e"># and create the following path:</span>
<span style="color: #75715e">#  *. /heron/topologies</span>
<span style="color: #75715e">#</span>
<span style="color: #75715e">#  -</span>
<span style="color: #75715e">#    type: &quot;zookeeper&quot;</span>
<span style="color: #75715e">#    name: &quot;localzk&quot;</span>
<span style="color: #75715e">#    hostport: &quot;localhost:2181&quot;</span>
<span style="color: #75715e">#    rootpath: &quot;/heron&quot;</span>
<span style="color: #75715e">#    tunnelhost: &quot;localhost&quot; -</span>
</pre></div>

<p>Topologies from all the state managers would be read and can be queried from
Tracker.</p>

<p>Note that Tracker does not create any zookeeper nodes itself. It is a readonly
service. If you launch the Tracker without creating <code>/topologies</code> node under the
rootpath, Tracker will fail with a <code>NoNodeError</code>.</p>

<h4 id="2-viz-url-format">2. Viz URL Format</h4>

<p>This is an optional config. If it is present, then it will show up for each
topology as the viz link as shown below. For each topology, these parameters
will be filled appropriately. This parameter can be used to link metrics
dashboards with topology UI page.</p>

<p><img src="https://dsc-spidal.github.io/harp/img/viz-link.png" alt="Viz Link" /></p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e"># The URL that points to a topology&#39;s metrics dashboard.</span>
<span style="color: #75715e"># This value can use following parameters to create a valid</span>
<span style="color: #75715e"># URL based on the topology. All parameters are self-explanatory.</span>
<span style="color: #75715e"># These are found in the execution state of the topology.</span>
<span style="color: #75715e">#</span>
<span style="color: #75715e">#   ${CLUSTER}</span>
<span style="color: #75715e">#   ${ENVIRON}</span>
<span style="color: #75715e">#   ${TOPOLOGY}</span>
<span style="color: #75715e">#   ${ROLE}</span>
<span style="color: #75715e">#   ${USER}</span>
<span style="color: #75715e">#</span>
<span style="color: #75715e"># This is a sample, and should be changed to point to corresponding dashboard.</span>
<span style="color: #75715e">#</span>
<span style="color: #75715e"># viz.url.format: &quot;http://localhost/${CLUSTER}/${ENVIRON}/${TOPOLOGY}/${ROLE}/${USER}&quot;</span>
</pre></div>

<h3 id="heron-tracker-args">Heron Tracker Args</h3>

<ul>
<li><code>--port</code> - Port to run the heron-tracker on. Default port is <code>8888</code>.</li>
<li><code>--config-file</code> - The location of the config file for tracker. Default config
file is <code>~/.herontools/conf/heron_tracker.yaml</code>.</li>
</ul>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>$ heron-tracker
<span style="color: #75715e"># is equivalent to</span>
$ heron-ui --port<span style="color: #f92672">=</span><span style="color: #ae81ff">8888</span> --config-file<span style="color: #f92672">=</span>~/.herontools/conf/heron_tracker.yaml
</pre></div>
</article></section></div></div></div><script src="https://code.jquery.com/jquery-2.2.1.min.js"></script><script src="https://dsc-spidal.github.io/harp/js/app.min.js"></script></body></html>